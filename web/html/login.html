<!DOCTYPE html>
<html lang="en">
{{template "head" .}}
<style>
    #app {
        min-height: 100vh;
        background-color: var(--background);
    }
    
    .login-container {
        min-height: 100vh;
        padding: var(--space-4);
    }
    
    .login-card {
        overflow: hidden;
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-lg);
        background-color: var(--surface);
    }
    
    .illustration-side {
        background-color: var(--primary-light);
        background-image: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
        padding: 0;
        position: relative;
        min-height: 600px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .form-side {
        padding: var(--space-8);
        display: flex;
        flex-direction: column;
        justify-content: center;
    }
    
    .ant-input-affix-wrapper .ant-input-prefix {
        color: var(--text-secondary);
        font-size: var(--text-lg);
        margin-right: var(--space-2);
    }
    
    .login-form-forgot {
        float: right;
    }
    
    @media (max-width: 768px) {
        .illustration-side {
            display: none;
        }
        
        .form-side {
            padding: var(--space-5);
        }
    }
</style>
<body>
<a-layout id="app" v-cloak>
    <a-layout-content class="login-container">
        <a-row type="flex" justify="center" align="middle" style="min-height: 100vh;">
            <a-col :xs="22" :sm="20" :md="18" :lg="16" :xl="14">
                <a-card class="login-card" :bordered="false">
                    <a-row type="flex">
                        <!-- 左侧插画区域 -->
                        <a-col :xs="0" :sm="0" :md="12" class="illustration-side">
                            <div class="login-illustration">
                                <div class="server-icon"></div>
                                <div class="connection-line"></div>
                                <div class="data-point"></div>
                                <div class="data-point"></div>
                                <div class="data-point"></div>
                                <div class="data-point"></div>
                                <div class="decoration-square"></div>
                                <div class="decoration-square"></div>
                            </div>
                        </a-col>
                        
                        <!-- 右侧表单区域 -->
                        <a-col :xs="24" :sm="24" :md="12" class="form-side">
                            <transition name="fade-in" appear>
                                <div>
                                    <h1 class="login-title">{{ .title }}</h1>
                                    <a-form>
                                        <a-form-item>
                                            <a-input 
                                                v-model.trim="user.username" 
                                                placeholder='{{ i18n "username" }}'
                                                @keydown.enter.native="login" 
                                                size="large"
                                                autofocus>
                                                <a-icon slot="prefix" type="user"/>
                                            </a-input>
                                        </a-form-item>
                                        <a-form-item>
                                            <a-input 
                                                type="password" 
                                                v-model.trim="user.password"
                                                placeholder='{{ i18n "password" }}' 
                                                @keydown.enter.native="login"
                                                size="large">
                                                <a-icon slot="prefix" type="lock"/>
                                            </a-input>
                                        </a-form-item>
                                        <a-form-item>
                                            <a-button 
                                                type="primary" 
                                                block 
                                                @click="login" 
                                                :loading="loading"
                                                class="login-button">
                                                {{ i18n "login" }}
                                            </a-button>
                                        </a-form-item>
                                    </a-form>
                                </div>
                            </transition>
                        </a-col>
                    </a-row>
                </a-card>
            </a-col>
        </a-row>
    </a-layout-content>
</a-layout>
{{template "js" .}}
<script>
    const app = new Vue({
        delimiters: ['[[', ']]'],
        el: '#app',
        data: {
            loading: false,
            user: new User(),
        },
        methods: {
            async login() {
                this.loading = true;
                const msg = await HttpUtil.post('/login', this.user);
                this.loading = false;
                if (msg.success) {
                    location.href = basePath + 'xui/';
                }
            }
        }
    });
</script>
</body>
</html>