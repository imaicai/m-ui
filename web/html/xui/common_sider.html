{{define "menuItems"}}
<a-menu-item key="{{ .base_path }}xui/">
    <a-icon type="dashboard"></a-icon>
    <span>系统状态</span>
</a-menu-item>
<a-menu-item key="{{ .base_path }}xui/inbounds">
    <a-icon type="user"></a-icon>
    <span>入站列表</span>
</a-menu-item>
<a-menu-item key="{{ .base_path }}xui/setting">
    <a-icon type="setting"></a-icon>
    <span>面板设置</span>
</a-menu-item>
{{end}}


{{define "commonSider"}}
<a-layout-header id="topnav" style="background: #fff; padding: 0 24px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); position: sticky; top:0; z-index:100;">
    <div style="display:flex; align-items:center; justify-content:space-between;">
        <div style="display:flex; align-items:center;">
            <div style="font-size: 20px; font-weight: 600; color:#1f1f1f; letter-spacing: 1px; margin-right: 16px;">M-UI</div>
            <a-menu mode="horizontal" :selected-keys="['{{ .request_uri }}']"
                    @click="({key}) => key.startsWith('http') ? window.open(key) : location.href = key">
                {{template "menuItems" .}}
            </a-menu>
        </div>
        <div style="display:flex; align-items:center; gap:16px;">
            <a href="https://github.com/imaicai/m-ui/" target="_blank" style="color:#333;">
                <a-icon type="github" style="font-size:18px;"></a-icon>
            </a>
            <a @click="location.href='{{ .base_path }}logout'" style="color:#333;">
                <a-icon type="logout" style="font-size:18px;"></a-icon>
            </a>
        </div>
    </div>
</a-layout-header>
<script>

    const siderDrawer = {
        visible: false,
        show() { this.visible = true; },
        close() { this.visible = false; },
        change() { this.visible = !this.visible; }
    };

</script>
{{end}}
<a-drawer id="sider-drawer" placement="left" :closable="false"
          @close="siderDrawer.close()"
          :visible="siderDrawer.visible" :wrap-style="{ padding: 0 }">
    <div class="drawer-handle" @click="siderDrawer.change()" slot="handle">
        <a-icon :type="siderDrawer.visible ? 'close' : 'menu-fold'"></a-icon>
    </div>
    <div style="height: 64px; display: flex; align-items: center; justify-content: center; background: #f0f2f5; margin-bottom: 16px; border-bottom: 1px solid #e8e8e8;">
        <div style="color: #333; font-size: 20px; font-weight: 600; letter-spacing: 1px;">M-UI</div>
    </div>
    <a-menu theme="light" mode="inline" :selected-keys="['{{ .request_uri }}']"
        @click="({key}) => key.startsWith('http') ? window.open(key) : location.href = key">
        {{template "menuItems" .}}
    </a-menu>
</a-drawer>
<script>

    const siderDrawer = {
        visible: false,
        show() {
            this.visible = true;
        },
        close() {
            this.visible = false;
        },
        change() {
            this.visible = !this.visible;
        }
    };

</script>
{{end}}